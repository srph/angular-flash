var app=angular.module("angular-flash",[]);app.provider("$flash",[function(){this._lifetime=2e3,this._registry=[],this.lifetime=function(ms){return void 0!==ms&&(this._liftime=ms),this._lifetime},this.isInRegistry=function(type){return!(-1==this._registry.map(function(cur){return cur.type}).indexOf(type))},this.register=function(data){if(data instanceof Array)angular.forEach(data,function(value){this.register(value)},_this);else{if("object"!=typeof data)return console.error("Data is not an object!");if(this.isInRegistry(data.type))return console.error("Given name is already in the registry");this._registry.push(data)}return this};var _this=this;this.$get=["$rootScope",function($rootScope){var flash={};return flash._list=[],flash.lifetime=function(ms){return _this.lifetime(ms)},flash.fire=function(data){if(data instanceof Array)angular.forEach(data,function(value){this.register(value)},_this);else{if("object"!=typeof data)return console.error("Not an object nor an array");if(!_this.isInRegistry(data.type))return console.error("Given name is not in the registry!");this._list.push(data),$rootScope.$emit("$flashFired")}return this},flash}]}]),app.directive("flash",[function(){var controller=function($scope,$rootScope,$timeout,$flash){var shift=function(){$timeout(function(){$flash._list.shift(),$scope.list=$flash._list,$rootScope.$emit("$flashFiredRemoved")},$flash.lifetime(),!0)};$rootScope.$on("$flashFired",function(){console.log("Fired!"),$scope.list=$flash._list,console.log($scope.list.length),shift()})},template='<div id="ng-notification-flash-container" style="position: fixed; left: 0; right: 0;"><div id="ng-notification-flash-inner" ng-repeat="item in list" class="{{ item.type }}" style="display: block; background: red;"><p> {{ item.message }} </p></div></div>';return{restrict:"AE",transclude:!0,template:template,controller:["$scope","$rootScope","$timeout","$flash",controller]}}]);