var app=angular.module("angular-flash",[]);app.provider("flash",function(){var t=function(t,e){i[t]=e},e=[{type:"success","class":"alert alert-success alert-dismissible"},{type:"info","class":"alert alert-info alert-dismissible"},{type:"warning","class":"alert alert-warning alert-dismissible"},{type:"danger","class":"alert alert-danger alert-dismissible"}],i=function(t){return angular.copy(t)}(e),n=function(e){var n;(n=a(e.type))&&t(n,e),i.push(e)},r=function(t){var e=i.map(function(t){return t.type}).indexOf(t);return e},a=function(t){return r(t)},s=1e4;this._registry=i,this.lifetime=function(t){return angular.isDefined(t)&&(s=t),s},this.register=function(t){if(angular.isArray(t))angular.forEach(t,function(t){this.register(t)},this);else{if(!angular.isObject(t))throw new Error("Registered data is not an object!");n(t)}return this};var l=this;this.$get=["$rootScope",function(t){var e={},i=[],n=function(t){return t=parseInt(t,10),l._registry[t].class},r=function(t){var i=e.list().map(function(t){return t.message}).indexOf(t);return i},s=function(t){var e=r(t);return angular.equals(e,-1)?!1:!0},o=function(t){return angular.equals(t.unique,!0)&&s(t.message)?!0:!1},u=function(i){var r,s=i.type;if(-1==(r=a(s)))throw new Error(i.type+" is not defined in the registry!");o(i)||(i.class=n(r),e.list().push(i),t.$emit("$flashFired"))};return e.lifetime=function(){return l.lifetime()},e.fire=function(t){if(angular.isArray(t))angular.forEach(t,function(t){this.fire(t)},this);else{if(!angular.isObject(t))throw new Error("Data is neither an object nor an array");u(t)}return this},e.remove=function(e){this.list().splice(e,1),t.$emit("$flashFireRemoved")},e.clean=function(){this.list([])},e.shift=function(){this.list().shift(),t.$emit("$flashFiredRemoved")},e.list=function(t){if(angular.isDefined(t)){if(!angular.isArray(t))throw new Error("New _list is not an array!");i=angular.copy(t)}return i},e}]}),app.directive("flash",function(){function t(t,e,i,n,r){var a;t.list=r.list();var s=function(){r.shift(),0===r.list().length&&i.cancel(a),a=i(s,r.lifetime(),!0)};t.close=function(t){r.remove(t)},t.$watch("list",function(t,e){0==e.length&&1==t.length&&(a=i(s,r.lifetime(),!0)),n.info("Old:"+e.length),n.info("New:"+t.length)},!0)}t.$inject=["$scope","$rootScope","$timeout","$log","flash"];var e='<div class="ng-notification-flash-container" role="alert"><div ng-repeat="item in list"class="ng-notification-flash-inner {{ item.class }}"><button type="button" class="close" ng-click="close($index)"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><p> {{ item.message }} </p></div></div>';return{restrict:"AE",transclude:!0,template:e,controller:t}});