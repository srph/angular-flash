var app=angular.module("angular-flash",[]);app.provider("$flash",[function(){this._lifetime=1e4,this.bootstrap=[{type:"success","class":"alert alert-success alert-dismissible"},{type:"info","class":"alert alert-info alert-dismissible"},{type:"warning","class":"alert alert-warning alert-dismissible"},{type:"danger","class":"alert alert-danger alert-dismissible"}],this._registry=this.bootstrap,this.lifetime=function(ms){return angular.isDefined(ms)&&(this._lifetime=ms),this._lifetime},this.getPositionOfType=function(type){var index=this._registry.map(function(cur){return cur.type}).indexOf(type);return-1!=index?index:-1},this.getDataOfType=function(type){var index=this.getPositionOfType(type);return-1==index?index:this._registry[index]},this.isInRegistry=function(type){return this.getPositionOfType(type)},this.register=function(data){if(angular.isArray(data))angular.forEach(data,function(value){this.register(value)},_this);else{if(!angular.isObject(data))throw new Error("Registered data is not an object!");var position;(position=this.isInRegistry(data.type))&&this.overwrite(position,data),this._registry.push(data)}return this},this.overwrite=function(position,data){this._registry[position]=data};var _this=this;this.$get=["$rootScope",function($rootScope){var flash={};return flash._list=[],flash.lifetime=function(){return _this.lifetime()},flash.fire=function(data){if(angular.isArray(data))angular.forEach(data,function(value){this.fire(value)},_this);else{if(!angular.isObject(data))throw new Error("Not an object nor an array");var position;if(-1==(position=_this.isInRegistry(data.type)))throw new Error(data.type+" is not in the registry!");data.class=_this._registry[position].class,this._list.push(data),$rootScope.$emit("$flashFired")}return this},flash.remove=function(pos){this._list.splice(pos,1),$rootScope.$emit("$flashFireRemoved")},flash.clean=function(){this.list([])},flash.shift=function(){this._list.shift(),$rootScope.$emit("$flashFiredRemoved")},flash.list=function(newList){if(angular.isDefined(newList)){if(!angular.isArray(newList))throw new Error("New _list is not an array!");this._list=newList}return this._list},flash}]}]),app.directive("flash",[function(){var controller=function($scope,$rootScope,$timeout,$flash){$scope.list=$flash.list();var shift=function(){$timeout(function(){$flash.shift()},$flash.lifetime(),!0)};$scope.close=function(pos){$flash.remove(pos)},$rootScope.$on("$flashFired",function(){shift()})},template='<div class="ng-notification-flash-container" role="alert"><div ng-repeat="item in list"class="ng-notification-flash-inner {{ item.class }}"><button type="button" class="close" ng-click="close($index)"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button><p> {{ item.message }} </p></div></div>';return{restrict:"AE",transclude:!0,template:template,controller:["$scope","$rootScope","$timeout","$flash",controller]}}]);